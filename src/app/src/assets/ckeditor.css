/* Don't allow focus and box-shadow */
.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused {
    border: 1px solid transparent;
    -webkit-box-shadow: initial;
    box-shadow: initial;
    border-bottom-style: solid;
    border-bottom-color: var(--primary-color-2);
}

/* Buttons */
.ck.ck-editor {
    --ck-color-text: rgba(0, 0, 0, 0.7);
    --ck-ui-component-min-height: 20px;
    --ck-color-base-border: #fff;
    --ck-color-base-background: #fff;
    --ck-border-radius: 2px;
    --ck-color-toolbar-border: #fff;
    --ck-color-toolbar-background: #fff;
    --ck-color-panel-background: #fff;
    --ck-color-widget-hover-border: var(--primary-color-2);
    --ck-color-base-action: var(--primary-color);
    
    /* Mention */
    --ck-color-mention-background: transparent;
    --ck-color-mention-text: #1e88e5;
}

.ck.ck-form .ck.ck-toolbar.ck-toolbar_compact {
    --ck-color-toolbar-border: rgba(0, 0, 0, 0.12);
}

.ck.ck-toolbar .ck.ck-toolbar__separator {
    margin-top: 6px;
    margin-bottom: 6px;
    background: rgba(0, 0, 0, 0.12);
}

.theme--dark .ck.ck-toolbar .ck.ck-toolbar__separator {
    background: rgba(255, 255, 255, 0.12);
}

.ck .ck-editor__editable_inline {
    max-height: 30vh;
}

.ck.ck-editor__top .ck-sticky-panel .ck-toolbar {
    border-bottom: 1px;
    border-bottom-color: rgba(0, 0, 0, 0.12);
    border-bottom-width: 1px;
    border-bottom-style: solid;
}

.ck .ck-toolbar__items .ck-button {
    opacity: 0.8;
}

.ck .ck-insert-table-dropdown-grid-box {
    border: 1px solid rgba(0, 0, 0, 0.3);
}

.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status {
    background: white;
    color: rgba(0, 0, 0, 0.7);
    border: 1px solid var(--ck-color-base-error);
}

.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status:after {
    top: calc((-1 * var(--ck-table-properties-error-arrow-size)) - 1px);
}

body[data-theme-dark="true"] .ck {
    --ck-color-base-background: #1E1E1E;
    --ck-color-text: rgba(255, 255, 255, 0.7);
    
    /* Toolbar */
    --ck-color-toolbar-background: #1E1E1E;
    --ck-color-toolbar-border: #1E1E1E;
    --ck-color-button-on-background: rgba(255, 255, 255, 0.301);
    --ck-color-button-default-hover-background: rgba(255, 255, 255, 0.301);

    /* Toolbar menu */
    --ck-color-dropdown-panel-background: #1E1E1E;
    --ck-color-dropdown-panel-border: rgba(255, 255, 255, 0.12);
    --ck-color-list-background: transparent;
    --ck-color-list-button-on-background: rgba(255, 255, 255, 0.75);
    --ck-color-list-button-hover-background:  rgba(255, 255, 255, 0.3);
    --ck-color-list-button-on-background-focus: rgba(255, 255, 255, 0.5);
    --ck-color-split-button-hover-background: rgba(255, 255, 255, 0.3);

    /* Content */
    --ck-color-base-text: #FFFFFF;
    --ck-color-base-border: #1E1E1E;

    /* Panel */
    --ck-color-panel-background: #1E1E1E;

    /* Disabled */
    --ck-color-input-disabled-background: rgb(59, 59, 59);
    --ck-color-input-disabled-border: rgba(255, 255, 255, 0.12);
    --ck-color-button-on-disabled-background: rgb(59, 59, 59);

    /* Input */
    --ck-color-input-background: transparent;
}

body[data-theme-dark="true"] .ck.ck-form .ck.ck-toolbar.ck-toolbar_compact {
    --ck-color-toolbar-border: rgba(255, 255, 255, 0.12);
}

.theme--dark .ck .ck-toolbar__items .ck-button {
    opacity: 1;
}

.ck-content code {
    box-shadow: none;
    -webkit-box-shadow: none;
}

.theme--dark .ck .ck-insert-table-dropdown-grid-box {
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.theme--dark .ck-content code {
    color: rgba(255, 255, 255, 0.884);
}

.theme--dark .ck.ck-editor__top .ck-sticky-panel .ck-toolbar {
    border-bottom-color: rgba(255, 255, 255, 0.12);
}

/* Code block */
.ck-content pre {
    padding: 8px 48px 8px 8px;
}

.ck.ck-editor__editable pre[data-language]:after {
    right: 0;
    line-height: 14px;
    font-size: 9px;
}

.theme--dark .ck-content pre {
    background: rgba(255, 255, 255, 0.205);
}

.ck-content pre code::before {
    content: "";
}

/* Custom CSS */
.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle {
    left: calc(1px - var(--ck-widget-outline-thickness));
}

.ck-content .todo-list .todo-list__label > input[checked]:before {
    background: var(--primary-color);
    border-color: var(--primary-color);
}

/* Panel / From */
.ck.ck-form .ck.ck-input-text {
    box-shadow: unset;
    -webkit-box-shadow: unset;
}

.ck.ck-form .ck.ck-input-color > .ck.ck-dropdown {
    margin-left: 2px;
    margin-top: 1px;
}

.ck.ck-form .ck.ck-input-color > .ck.ck-input-text {
    border-top-right-radius: var(--ck-border-radius);
    border-bottom-right-radius: var(--ck-border-radius);
}

/* Table forcus */
td.ck-editor__editable.ck-editor__nested-editable:focus {
    box-shadow: unset;
    -webkit-box-shadow: unset;
}

.theme--dark .ck .ck-content .table table th {
    background-color: rgb(59, 59, 59);
}

figure table {
    max-width: 100%;
}

/* P */
.ck.ck-editor__main p {
    margin-bottom: 8px;
}

.ck.ck-editor__main * > p:last-child {
    margin-bottom: 2px;
}

/* Mention */
.ck-content .mention {
    padding-right: 2px;
}

/* Placeholder */
.chat-editor p.ck-placeholder {
    margin-top: 9px !important;
    font-size: 14px;
}

.chat-editor .chat-editor-expanded p.ck-placeholder {
    margin-top: var(--ck-spacing-large) !important;
    font-size: unset;
}